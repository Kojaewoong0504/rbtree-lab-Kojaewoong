cmake_minimum_required(VERSION 3.16)

project(rbtree-lab-main C)

set(CMAKE_C_STANDARD 11)

# rbtree.hê°€ src/ ì•ˆì— ìˆìœ¼ë¯€ë¡œ include ê²½ë¡œ ì¶”ê°€
include_directories(${PROJECT_SOURCE_DIR}/src)

# ğŸ”¹ ë¼ì´ë¸ŒëŸ¬ë¦¬: rbtree.c
add_library(rbtree
        src/rbtree.c
)

# ğŸ”¹ ì‹¤í–‰ íŒŒì¼: src/driver.c (ë©”ì¸ í•¨ìˆ˜ í¬í•¨)
add_executable(rbtree_main_exec
        src/driver.c
)
target_link_libraries(rbtree_main_exec rbtree)

# ğŸ”¹ í…ŒìŠ¤íŠ¸ íŒŒì¼: test/test_rbtree.c
add_executable(rbtree_test
        test/test-rbtree.c
)
target_link_libraries(rbtree_test rbtree)

# ğŸ”¹ í´ë¦° íƒ€ê²Ÿ ì¶”ê°€ (ì˜µì…˜): make clean-all ë¡œ ë¹Œë“œ í´ë¦°
add_custom_target(clean-all
        COMMAND ${CMAKE_COMMAND} --build . --target clean
        COMMENT "Cleaning all build files"
)

target_compile_definitions(rbtree_test PRIVATE SENTINEL)